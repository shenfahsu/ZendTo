<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="verify-v1" content="1hEPvYUnDCyU0uIh2cx9f1hca/X36c8uNytF52WKM3w=" />
<title>::: Official Home Page for ZendTo - Web-Based File Transfer :::</title>
<link rel="icon" href="favicon.ico" type="image/x-icon"> 
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon"> 
<style type="text/css">
<!--
body,td,th {
	font-family: Tahoma, Arial;
	font-size: 12px;
	color: #000000;
}
body {
	background-image: url(images/r_fill.jpg);
	background-repeat: repeat-x; 
	margin-left: 0px;
	margin-top: 0px;
	margin-right: 0px;
	margin-bottom: 0px;
}
a:link {
	color: #99CC33;
	text-decoration: none;
}
a:visited {
	text-decoration: none;
	color: #99CC33;
}
a:hover {
	text-decoration: underline;
	color: #996600;
}
a:active {
	text-decoration: none;
	color: #99CC33;
}
.style1 {color: #FFFFFF}

a.dog:link { color: #333333; text-decoration: none }
a.dog:active { color: #333333; text-decoration: none }
a.dog:visited { color: #333333; text-decoration: none }
a.dog:hover { color: #333333; text-decoration: underline }

a.menuleft:link { color: #333333; text-decoration: none }
a.menuleft:active { color: #333333; text-decoration: none }
a.menuleft:visited { color: #333333; text-decoration: none }
a.menuleft:hover { color: #000000; text-decoration: no-underline; background: none }

a.tree:link { color: #FFFFFF; text-decoration: none }
a.tree:active { color: #FFFFFF; text-decoration: none }
a.tree:visited { color: #FFFFFF; text-decoration: none }
a.tree:hover { color: #FFFFFF; text-decoration: underline }
.style1 {color: #FFFFFF}
.style6 {font-size: 18px; font-weight: bold; }
.style1 a {
 display: block;
 padding: 8px;
}
-->
</style></head>

<body bgcolor="#CACACA">
<table width="765" height="100%" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr>
    <td width="1" rowspan="4" bgcolor="#000000"></td>
    <td width="235" height="72" align="left" valign="top" bgcolor="#99CC33"><a href="/"><img src="images/zendto_logo.png" width="235" height="71" border="0"></a></td>
    <td width="656" height="18" align="right" valign="top" bgcolor="#99CC33"><table width="120" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td width="9" height="18"><img src="images/utility_leftcurve.en-us.png" width="9" height="18"></td>
        <td width="55" bgcolor="#FFFFFF"><div align="center"><a href="donate.html" class="dog">Donate</a></div></td>
<!--        <td width="1" bgcolor="#666666"><div align="center"><font size="-10">&nbsp;</font></div></td>
        <td width="63" bgcolor="#FFFFFF"><div align="center"><a href="#store" class="dog">Store</a></div></td>
        <td width="1" bgcolor="#666666"><div align="center"><font size="-10">&nbsp;</font></div></td>
        <td width="63" bgcolor="#FFFFFF"><div align="center"><a href="poetry.html" class="dog">Poetry</a></div></td> -->
        <td width="1" bgcolor="#666666"><div align="center"><font size="-10">&nbsp;</font></div></td>
        <td width="58" bgcolor="#FFFFFF"><div align="center"><a href="index.html" class="dog">Home</a></div></td>
        <td width="5" bgcolor="#FFFFFF">&nbsp;</td>
      </tr>
    </table></td>
    <td width="1" rowspan="4" bgcolor="#000000"></td>
  </tr>
  <tr>
    <td height="35" colspan="2" bgcolor="#000000">
	<table width="695" height="35"  border="0" cellpadding="0" cellspacing="0">
      <tr>
        <td width="115" valign="middle"><div align="center"><span class="style1"><a href="downloads.html" class="tree">Downloads</a></span></div></td>
        <td width="1" bgcolor="#CCCCCC"></td>
        <td width="115" valign="middle"><div align="center"><span class="style1"><a href="support.html" class="tree">Support</a></span></div></td>
		<td width="1" bgcolor="#CCCCCC"></td>
<!--        <td width="115" valign="middle"><div align="center"><span class="style1"><a href="users.html" class="tree">Our Users </a></span></div></td>
        <td width="1" bgcolor="#CCCCCC"></td> -->
        <td width="115" valign="middle"><div align="center"><span class="style1"><a href="documentation.html" class="tree">Documentation</a></span></div></td>
        <td width="1" bgcolor="#CCCCCC"></td>
        <!-- <td width="115" valign="middle"><div align="center"><span class="style1"><a href="deployment.html" class="tree">Deployment</a></span></div></td>
        <td width="1" bgcolor="#CCCCCC"></td> -->
        <td width="115" valign="middle"> <div align="center"><span class="style1"><a href="contactus.html" class="tree">Contact Us</a> </span></div></td>
      </tr>
    </table>
	</td>
  </tr>
  <tr>
    <td height="5" colspan="2" bgcolor="#99CC33"></td>
  </tr>
  <tr>
    <td colspan="2" valign="top" bgcolor="#FFFFFF">
    <table width="100%" height="100%"  border="0" align="center" cellpadding="0" cellspacing="0">
              <tr>
                  <td width="587" height="25" align="left" valign="bottom"><img src="images/tabs_documentation.jpg" width="153" height="18" hspace="10"></td>

              </tr>
              <tr>
                <td height="1" bgcolor="#CCCCCC"></td>
              </tr>
          <tr>
              <td align="left" valign="top"><table width="100%"  border="0" cellspacing="0" cellpadding="5">
                <tr>
                  <td valign="top"><h2>Fixing PHP</h2>

<p>
PHP 5 is currently limited to a maximum of 2 Gbyte file uploads, even on 64-bit systems. Fortunately this is easily fixed.
</p>

<h2>Ubuntu</h2>

As 32-bit operating systems are limited to 2 Gbyte uploads anyway, only do this on 64-bit systems.

<tt><pre>
sudo su -

mkdir php-source
cd php-source
apt-get -y install debhelper bison chrpath freetds-dev libcurl4-openssl-dev libedit-dev libgd2-xpm-dev libgmp3-dev libmhash-dev libpam0g-dev libpspell-dev librecode-dev libsasl2-dev libsnmp-dev libsqlite0-dev libt1-dev libtidy-dev re2c unixodbc-dev
apt-get -y install apache2-prefork-dev autoconf automake flex hardening-wrapper libapr1-dev libbz2-dev libdb-dev libenchant-dev libgcrypt11-dev libglib2.0-dev libicu-dev libmysqlclient-dev libpcre3-dev libpq-dev libsqlite3-dev libxmltok1-dev libxml2-dev libxslt1-dev quilt
apt-get -y install clamav clamav-daemon
apt-get -y install php5 php5-cli php5-sqlite php5-ldap
apt-get -y install rrdtool
apt-get -y source php5-cgi
cd php5*
perl -i -pe 's/int zend_atoi/long zend_atoi/' Zend/zend_operators.[ch];
perl -i -pe 's/\n/@@@@@@/g' Zend/zend_operators.c;
perl -i -pe 's/(long zend_atoi.*?)int retval/$1long retval/m' Zend/zend_operators.c;
perl -i -pe 's/@@@@@@/\n/g' Zend/zend_operators.c;
perl -i -pe 's/atoi\(content_length\)/atol(content_length)/' `find sapi -name '*.c'`
perl -i -pe 's/\(uint\)( SG\(request_info\))/$1/' `find sapi -name '*.c'`;
perl -i -pe 's/uint post_data_length, raw/uint IGNORE_post_data_length, IGNORE_raw/' main/SAPI.h;
perl -i -pe 's/} sapi_request_info/\tlong post_data_length, raw_post_data_length;\n} sapi_request_info/' main/SAPI.h;
perl -i -pe 's/int read_post_bytes/long read_post_bytes/'    main/SAPI.h;
perl -i -pe 's/int boundary_len=0, total_bytes=0/long total_bytes=0; int boundary_len=0/' main/rfc1867.c;

dpkg-buildpackage -rfakeroot -uc -b -j2
cd debian/libapache2-mod-php5/usr/lib/apache2/modules
mv /usr/lib/apache2/modules/libphp5.so /usr/lib/apache2/modules/libphp5.so-UBUNTU
cp libphp5.so /usr/lib/apache2/modules/
</pre></tt>

<h2>CentOS</h2>

As 32-bit operating systems are limited to 2 Gbyte uploads anyway, only do this on 64-bit systems.

<tt><pre>
yum -y install libdbi lua-devel gettext lua ruby xorg-x11-fonts-Type1

Fetch php SRPM from
http://www.mirrorservice.org/sites/mirror.centos.org/5.5/os/SRPMS/

yum -y install make bzip2-devel curl-devel db4-devel expat-devel gmp-devel aspell-devel httpd-devel libjpeg-devel libpng-devel libstdc++-devel openssl-devel sqlite-devel zlib-devel pcre-devel libtool gcc-c++ krb5-devel libc-client-devel cyrus-sasl-devel openldap-devel mysql-devel postgresql-devel unixODBC-devel libxml2-devel net-snmp-devel libxslt-devel libxml2-devel ncurses-devel gd-devel freetype-devel pam-devel

rpm -Uvh php-5*src.rpm
cd /usr/src/redhat/SPECS
rpmbuild -bp php.spec
cd /usr/src/redhat/BUILD
cp -pr php-5.1.6 php-5.1.6.new
cd php-5.1.6.new

perl -i -pe 's/int zend_atoi/long zend_atoi/' Zend/zend_operators.[ch];
perl -i -pe 's/\n/@@@@@@/g' Zend/zend_operators.c;
perl -i -pe 's/(long zend_atoi.*?)int retval/$1long retval/m' Zend/zend_operators.c;
perl -i -pe 's/@@@@@@/\n/g' Zend/zend_operators.c;
perl -i -pe 's/atoi\(content_length\)/atol(content_length)/' `find sapi -name '*.c'`
perl -i -pe 's/\(uint\)( SG\(request_info\))/$1/' `find sapi -name '*.c'`;
perl -i -pe 's/uint post_data_length, raw/uint IGNORE_post_data_length, IGNORE_raw/' main/SAPI.h;
perl -i -pe 's/} sapi_request_info/\tlong post_data_length, raw_post_data_length;\n} sapi_request_info/' main/SAPI.h;
perl -i -pe 's/int read_post_bytes/long read_post_bytes/'    main/SAPI.h;
perl -i -pe 's/int boundary_len=0, total_bytes=0/long total_bytes=0; int boundary_len=0/' main/rfc1867.c;

cd ..
diff -Naur php-5.1.6 php-5.1.6.new > php-biguploads.patch
mv php-biguploads.patch /usr/src/redhat/SOURCES
cd ../SPECS
Edit php.spec
- Add line to end of all Patch???: lines saying
Patch999: php-biguploads.patch
- Add line to end of all %patch??? lines saying
%patch999 -p1 -b .biguploads
- Add .jkf in the "Release:" line so it says "Release: 27.jkf.%{?dist}"

rpmbuild -ba php.spec

cd ../RPMS/x86_64
rpm -Uvh php-5* php-cli* php-common* php-imap* php-ldap* php-mysql* php-pdo*
</pre></tt>

                </tr>
              </table></td>
          </tr>
    </table>
    </td>
  </tr>
</table>
<table width="765" height="46"  border="0" align="center" cellpadding="0" cellspacing="0" bgcolor="#000000">
  <tr valign="middle">
    <td height="45"><div align="center">
      <p class="style1">Copyright 2010 &copy; Julian Field/ZendTo </p>
      </div></td>
  </tr>
</table>
</body>
</html>

